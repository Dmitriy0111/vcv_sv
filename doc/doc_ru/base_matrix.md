# base_matrix

Данный файл содержит описание базового класса изображения. 

Заголовок:
```Verilog
class base_matrix;
```

## Поля и функции/задачи класса 

### Поля:
| Имя               | Тип               | Описание                                      |
| ----------------- | ----------------- | --------------------------------------------- |
| gist              | gist_c            | Класс гистограммы                             |
| R                 | bit [7 : 0] [][]  | Двумерный массив красного цвета пикселей      |
| G                 | bit [7 : 0] [][]  | Двумерный массив зелёного цвета пикселей      |
| B                 | bit [7 : 0] [][]  | Двумерный массив синего цвета пикселей        |
| Height            | int               | Высота изображения                            |
| Width             | int               | Ширина изображения                            |
| Resolution        | int               | Разрешение изображения                        |
| p_x               | int               | Позиция пикселя по ширине                     |
| p_y               | int               | Позиция пикселя по высоте                     |
| p_c               | int               | Позиция пикселя в одномерном представлении    |
| cycle             | int               | Цикл изображения                              |
| fd                | int               | Указатель на файл изображения                 |
| path2folder       | string            | Путь к папке файлов изображений               |
| image_name        | string            | Имя файла изображения                         |
| cycle_s           | string            | Цикл изображения в строковом формате          |
| fn                | string            | Полное имя к файлу изображения                |
| out_format        | string [$]        | Очередь выходных форматов файла               |
| in_format         | string            | Входной формат файла                          |
| rgb2ycbcr_coefs   | real [9]          | Коэффициенты для преобразования RGB-YCbCr     |
| rgb2ycbcr_offs    | int  [3]          | Смещения для преобразования RGB-YCbCr         |
| ycbcr2rgb_coefs   | real [9]          | Коэффициенты для преобразования YCbCr-RGB     |
| ycbcr2rgb_offs    | int  [3]          | Смещения для преобразования YCbCr-RGB         |

### Функции/задачи:
| Имя                   | Описание                                                          |
| --------------------- | ----------------------------------------------------------------- |
| new                   | Конструктор класса                                                |
| get_width             | Функция для получения ширины изображения                          |
| get_height            | Функция для получения высоты изображения                          |
| set_width             | Задача для установки ширины изображения                           |
| set_height            | Задача для установки высоты изображения                           |
| create_matrix         | Функция для создания массивов изображения                         |
| free_matrix           | Задача для освобождения ресурсов класса                           |
| path2file             | Функция для получения полного пути к файлу                        |
| load_matrix           | Задача для загрузки данных из файла                               |
| save_matrix           | Задача для сохранения данных в файл                               |
| set_RGB               | Функция для установки цвета пикселя в RGB формате                 |
| set_image_RGB         | Функция для установки цвета пикселя в RGB формате                 |
| get_RGB               | Функция для получения цвета пикселя в RGB формате                 |
| get_image_RGB         | Функция для получения цвета пикселя в RGB формате                 |
| set_image_Bayer       | Функция для установки цвета пикселя в Bayer RGB формате           |
| get_image_Bayer       | Функция для получения цвета пикселя в Bayer RGB формате           |
| copy_arrays           | Задача для копирования массивов из другого класса изображения     |
| mix_arrays            | Задача для совмещения цветов с другим классом изображения         |
| find_and_save_gist    | Задача для нахождения и сохранения гистограммы изображения        |
| cycle_inc             | Задача для увеличения счётчика цикла (cycle)                      |
| reset_pos             | Задача для сброса счётчиков позиций                               |
| rgb2ycbcr             | Задача для преобразования RGB-YCbCr                               |
| ycbcr2rgb             | Задача для преобразования YCbCr-RGB                               |
| clnpix                | Задача для очистки массивов изображения                           |
| create                | Функция для создания класса изображения                           |

### Описание функций/задач:

#### new
Конструктор класса для создания экземпляра base_matrix.

Заголовок:
```Verilog
function new(int Width_i, int Height_i, string path2folder_i, string image_name_i, string in_format_i = ".data", string out_format_i[]={".data"});
```

Аргументы:
| Имя           | Тип       | Описание                          |
| ------------- | --------- | --------------------------------- |
| Width_i       | int       | Ширина изображения                |
| Height_i      | int       | Высота изображения                |
| path2folder_i | string    | Путь к папке изображений          |
| image_name_i  | string    | Имя изображения                   |
| in_format_i   | string    | Входной формат файла              |
| out_format_i  | string [] | Очередь выходных форматов файла   |

#### get_width
Функция для получения ширины изображения.

Заголовок:
```Verilog
int get_width();
```

#### get_height
Функция для получения высоты изображения.

Заголовок:
```Verilog
int get_height();
```

#### set_width
Задача для задания ширины изображения.

Заголовок:
```Verilog
virtual task set_width(int Width_i);
```

Аргументы:
| Имя       | Тип   | Описание              |
| --------- | ----- | --------------------- |
| Width_i   | int   | Ширина изображения    |

#### set_height
Задача для задания высоты изображения.

Заголовок:
```Verilog
virtual task set_height(int Height_i);
```

Аргументы:
| Имя       | Тип   | Описание              |
| --------- | ----- | --------------------- |
| Height_i  | int   | Высота изображения    |

#### create_matrix
Функция для создания динамических массивов.

Заголовок:
```Verilog
virtual function void create_matrix();
```

#### free_matrix
Задача для освобождения ресурсов.

Заголовок:
```Verilog
virtual task free_matrix();
```

#### path2file
Функция для формирования и получения пути к файлу изображения.

Заголовок:
```Verilog
virtual function string path2file(string format);
```

Аргументы:
| Имя       | Тип       | Описание                  |
| --------- | --------- | ------------------------- |
| format    | string    | входное расширение файла  |

#### load_matrix
Задача для загрузки данных из файла в массивы. Содержит алгоритм для чтения массива шестнадцатеричных значений в R G B формате.

Заголовок:
```Verilog
virtual task load_matrix();
```

#### save_matrix
Задача для сохранения данных из массивов в файл. Содержит алгоритм для записи массива шестнадцатеричных значений в R G B формате.

Заголовок:
```Verilog
virtual task save_matrix();
```

#### set_RGB
Функция для задания значений цветов пикселя с координатами x,y.

Заголовок:
```Verilog
virtual function void set_RGB(int x, int y, bit[23 : 0] pixel_rgb);
```

Аргументы:
| Имя       | Тип           | Описание              |
| --------- | ------------- | --------------------- |
| x         | int           | Координата по ширине  |
| y         | int           | Координата по высоте  |
| pixel_rgb | bit[23 : 0]   | Значение пикселя      |

#### set_image_RGB
Функция для задания значений цветов пикселя в формате RGB. Возвращает значение '1' если заполнены все пиксели изображения.

Заголовок:
```Verilog
virtual function bit set_image_RGB(bit[23 : 0] pixel_rgb);
```

Аргументы:
| Имя       | Тип           | Описание              |
| --------- | ------------- | --------------------- |
| pixel_rgb | bit[23 : 0]   | Значение пикселя      |

#### get_RGB
Функция для получения значений цветов пикселя с координатами x,y.

Заголовок:
```Verilog
virtual function bit [23 : 0] get_RGB(int x, int y);
```

Аргументы:
| Имя       | Тип           | Описание              |
| --------- | ------------- | --------------------- |
| x         | int           | Координата по ширине  |
| y         | int           | Координата по высоте  |

#### get_image_RGB
Функция для получения значений цветов пикселя в формате RGB. Возвращает значение '1' если получены все пиксели изображения.

Заголовок:
```Verilog
virtual function bit get_image_RGB(ref bit [23 : 0] pixel_rgb);
```

Аргументы:
| Имя       | Тип               | Описание              |
| --------- | ----------------- | --------------------- |
| pixel_rgb | ref bit[23 : 0]   | Значение пикселя      |

#### set_image_Bayer
Функция для задания значений цветов пикселя в формате Bayer-RGB. Возвращает значение '1' если заполнены все пиксели изображения.

Заголовок:
```Verilog
virtual function bit set_image_Bayer( bit [7 : 0] Bayer );
```

Аргументы:
| Имя   | Тип           | Описание              |
| ----- | ------------- | --------------------- |
| Bayer | bit[7 : 0]    | Значение пикселя      |

#### get_image_Bayer
Функция для получения значений цветов пикселя в формате Bayer-RGB. Возвращает значение '1' если получены все пиксели изображения.

Заголовок:
```Verilog
virtual function bit get_image_Bayer(ref bit [7 : 0] Bayer);
```

Аргументы:
| Имя   | Тип               | Описание              |
| ----- | ----------------- | --------------------- |
| Bayer | ref bit[7 : 0]    | Значение пикселя      |

#### copy_arrays
Задача для копирования массивов изображения из другого класса изображения.

Заголовок:
```Verilog
virtual task copy_arrays(base_matrix oth_matrix);
```

Аргументы:
| Имя           | Тип           | Описание                  |
| ------------- | ------------- | ------------------------- |
| oth_matrix    | base_matrix   | Другой класс изображения  |

#### mix_arrays
Задача для совмещения цветов с другим классом изображения.

Заголовок:
```Verilog
virtual task mix_arrays(base_matrix oth_matrix);
```

Аргументы:
| Имя           | Тип           | Описание                  |
| ------------- | ------------- | ------------------------- |
| oth_matrix    | base_matrix   | Другой класс изображения  |

#### find_and_save_gist
Задача для нахождения и сохранения гистограммы изображения.

Заголовок:
```Verilog
virtual task find_and_save_gist();
```

#### cycle_inc
Задача для увеличения значения цикла (cycle).

Заголовок:
```Verilog
virtual task cycle_inc();
```

#### reset_pos
Задача сброса счётчиков позиций изображения.

Заголовок:
```Verilog
virtual task reset_pos();
```

Аргументы:
| Имя           | Тип           | Описание                  |
| ------------- | ------------- | ------------------------- |
| oth_matrix    | base_matrix   | Другой класс изображения  |

#### rgb2ycbcr
Задача для преобразования RGB-YCbCr.

Заголовок:
```Verilog
virtual task rgb2ycbcr();
```

#### ycbcr2rgb
Задача для преобразования YCbCr-RGB.

Заголовок:
```Verilog
virtual task ycbcr2rgb();
```

#### clnpix
Задача для очистки массивов изображения.

Заголовок:
```Verilog
virtual task clnpix();
```

#### create
Функция для создания класса изображения.

Заголовок:
```Verilog
static function base_matrix create(int Width_i, int Height_i, string path2folder_i, string image_name_i, string in_format_i = ".data", string out_format_i[] = {".data"});
```

Аргументы:
| Имя           | Тип       | Описание                          |
| ------------- | --------- | --------------------------------- |
| Width_i       | int       | Ширина изображения                |
| Height_i      | int       | Высота изображения                |
| path2folder_i | string    | Путь к папке изображений          |
| image_name_i  | string    | Имя изображения                   |
| in_format_i   | string    | Входной формат файла              |
| out_format_i  | string [] | Очередь выходных форматов файла   |